CREATE TABLE REP
(
ID INT,
VAL INT
);


INSERT INTO REP VALUES (1,1);
INSERT INTO REP VALUES (2,1);
INSERT INTO REP VALUES (3,2);
INSERT INTO REP VALUES (4,5);
INSERT INTO REP VALUES (5,5);
INSERT INTO REP VALUES (6,5);
INSERT INTO REP VALUES (7,6);
INSERT INTO REP VALUES (8,6);
INSERT INTO REP VALUES (9,7);

WITH CTE AS
(SELECT ID,VAL,COUNT(*) OVER (PARTITION BY VAL ORDER BY VAL) RNK FROM REP)
SELECT ID,VAL,RNK FROM CTE ORDER BY RNK DESC;